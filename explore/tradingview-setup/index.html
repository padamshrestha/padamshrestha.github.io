<!DOCTYPE html>
<html class="no-js" lang="en"> <head><meta charset="utf-8"/><meta content="width=device-width,initial-scale=1" name="viewport"/><meta content="Notes from day to day tasks" name="description"/><meta content="Padam Shrestha" name="author"/><link href="../../assets/images/favicon.png" rel="icon"/><meta content="mkdocs-1.5.3, mkdocs-material-8.5.7" name="generator"/><title>Trading set for API automation - Blog</title><link href="../../assets/stylesheets/main.20d9efc8.min.css" rel="stylesheet"/><link href="../../assets/stylesheets/palette.cbb835fc.min.css" rel="stylesheet"/><link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href="../../assets/stylesheets/extra.css" rel="stylesheet"/><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-08DR4DTC9K"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-08DR4DTC9K",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-08DR4DTC9K",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gdesc-inner { font-size: 0.75rem; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                </style><script src="../../assets/javascripts/glightbox.min.js"></script></head> <body data-md-color-accent="indigo" data-md-color-primary="light-blue" data-md-color-scheme="slate" dir="ltr"> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/> <input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a class="md-skip" href="#trading-set-for-api-automation"> Skip to content </a> </div> <div data-md-component="announce"> </div> <header class="md-header" data-md-component="header"> <nav aria-label="Header" class="md-header__inner md-grid"> <a aria-label="Blog" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Blog"> <img alt="logo" src="../../assets/images/blog_logo.png"/> </a> <label class="md-header__button md-icon" for="__drawer"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> Blog </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Trading set for API automation </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="light-blue" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"></path></svg> </label> <input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="red" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_2" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg> </label> </form> <label class="md-header__button md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/> <label class="md-search__icon md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label="Search" class="md-search__options"> <button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> <div class="md-search__suggest" data-md-component="search-suggest"></div> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" data-md-scrollfix=""> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list"></ol> </div> </div> </div> </div> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a aria-label="Blog" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Blog"> <img alt="logo" src="../../assets/images/blog_logo.png"/> </a> Blog </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../.."> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/> <label class="md-nav__link" for="__nav_2"> Synapse <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Synapse" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> Synapse </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../synapse/build-dev-pyspark-cluster/"> ğŸ³ Build Development Spark cluster - PySpark, Delta Lake </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../synapse/pyspark-dataframe-api/"> ğŸ“ PySpark Quickstart </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../synapse/pyspark-cheat-sheet/"> ğŸ“„ PySpark Cheat Sheet </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../synapse/pyspark-azure-tables/"> âœ¨ Creating tables in PySpark Azure </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../spark-delta-partition/"> Creating partition in delta lake with spark </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../generate-stock-schema-delta-api/"> Design stock and option schema and provide fast api to access using spark delta </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../synapse/introduction/"> ğŸ“˜ Synapse Introduction </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../synapse/problem-solutions/"> ğŸ”“ Synapse / PySpark problem and solutions </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../data-dcitionary-pipeline/"> ğŸ§º Data dictionary for metadata driven Synapse pipeline </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../synapse/pyspark-courses/"> ğŸ”… Courses and Tutorials </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../synapse/links/"> ğŸ”— Synapse links </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/> <label class="md-nav__link" for="__nav_3"> Python <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Python" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> Python </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../python/python-basics/"> ğŸ Python Basics </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../python/create-python-package/"> ğŸ“¦ Create Custom Python Package </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../python/python-courses/"> ğŸ“™ Courses and Tutorials </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../python/links/"> ğŸ”— Python links </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/> <label class="md-nav__link" for="__nav_4"> Dotnet <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Dotnet" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_4"> <span class="md-nav__icon md-icon"></span> Dotnet </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../csharp/csharp-7/"> What's new in C# 7.0 through C# 7.3 </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../csharp/csharp-8/"> What's new in C# 8.0 </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../csharp/csharp-9/"> What's new in C# 9.0 - C# Guide </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../csharp/csharp-10/"> What's new in C# 10 - C# Guide </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../csharp/csharp-11/"> What's new in C# 11 - C# Guide </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" id="__nav_5" type="checkbox"/> <label class="md-nav__link" for="__nav_5"> Microservices <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Microservices" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_5"> <span class="md-nav__icon md-icon"></span> Microservices </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../microservices/grafana-dashboards/"> Grafana Dashboards </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../microservices/azure-function-dapr/"> Azure function with Dapr to create event-driven, distributed application </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../microservices/dapr-resources/"> Resources </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../microservices/links/"> ğŸ”— Dapr links </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" id="__nav_6" type="checkbox"/> <label class="md-nav__link" for="__nav_6"> Serverless <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Serverless" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_6"> <span class="md-nav__icon md-icon"></span> Serverless </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../serverless/links/"> ğŸ”— Azure Serverless links </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" id="__nav_7" type="checkbox"/> <label class="md-nav__link" for="__nav_7"> Azure <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Azure" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_7"> <span class="md-nav__icon md-icon"></span> Azure </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../home/azure-resource-graph-explorer/"> Write query using Azure Resource Graph Explorer </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../home/azure-keyboard-shortcuts/"> Azure Keyboard Shortcuts in Azure Portal </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../home/azure-service-fabric/"> Introduction to Azure Service Fabric </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../home/starting-azure-service-fabric/"> Starting Azure Service Fabric </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../azure/links/"> ğŸ”— Azure links </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" id="__nav_8" type="checkbox"/> <label class="md-nav__link" for="__nav_8"> Spark <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Spark" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_8"> <span class="md-nav__icon md-icon"></span> Spark </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../spark/jupyter-pyspark-docker/"> Run Jupyter for Pyspark on Docker </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../spark/dotnet-spark-learning/"> Spark Machine Learning </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../spark/dotnet-spark-docker/"> Run and Debug Dotnet Spark application on Docker </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../spark/dotnet-spark-ubuntu/"> Install Dotnet Spark on Ubuntu </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../spark/dotnet-spark-docker-ubuntu/"> Running Dotnet Spark applications on Ubuntu Continer </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../spark/install-docker-ubuntu2004/"> Install Docker on Ubuntu 20.04 LTS and Dotnet Spark on Docker </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../spark/python-learning/"> Learning Python </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../spark/links/"> ğŸ”— Spark links </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" id="__nav_9" type="checkbox"/> <label class="md-nav__link" for="__nav_9"> Kusto <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Kusto" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_9"> <span class="md-nav__icon md-icon"></span> Kusto </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../home/kusto-overview/"> Kusto Query Language (KQL) </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../home/dynamic-365-hcm-kusto/"> Troubleshoot using Kusto </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" id="__nav_10" type="checkbox"/> <label class="md-nav__link" for="__nav_10"> Angular <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Angular" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_10"> <span class="md-nav__icon md-icon"></span> Angular </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../home/deploy-angular-app-to-github-io-pages/"> Deploy Angular app to github.io pages </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" id="__nav_11" type="checkbox"/> <label class="md-nav__link" for="__nav_11"> Tools and Tricks <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Tools and Tricks" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_11"> <span class="md-nav__icon md-icon"></span> Tools and Tricks </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../fastapi-uvicorn/"> Configure Fast API with Uvicorn in Dockerfile </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/limited_access_pat_token/"> Create Git PAT token with limited access. </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/multiple-remote-git/"> Multiple remote git configuration for repository </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/chocolatey/"> Install and manage applications using Chocolatey </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/keyboard-shortcuts/"> Keyboard shortcuts for everyday tasks </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/error-solutions/"> Everyday error and fixes </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/certificates/"> Searching and Installing Certificates </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/install-vscode-ubuntu/"> Install VS Code on Ubuntu </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/install-brave-ubuntu2004/"> Install Brave browser on Ubuntu 20.04 LTS </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/useful-online-tools/"> âš’ Useful online tools </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/helpful-links/"> ğŸ”— Helpful links </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/nuget/"> Nuget Package Manger </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/docker/"> ğŸ³ Installing and Running Docker in WSL with VS Code </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/dotnetcore-azurefunction-wsl/"> Install dotnet core 3.1 and azure-functions-core-tools on WSL </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/configure-publish-mkdocs-github/"> ğŸ“š Configure Mkdocs and Auto deploy to Github.io </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/rename-dotnet-3-6/"> Migrate Dotnet Core 3.1 to DotNet 6.0 </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/git-help/"> Git </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/install-dotnet-sdk-armx64/"> Install dotnet skd on Mac m1 armx64 </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/windows-tricks/"> Windows tricks </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tools/linux-commands/"> Useful linux commands </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" id="__nav_12" type="checkbox"/> <label class="md-nav__link" for="__nav_12"> Courses, Projects, Tutorials, Blogs <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Courses, Projects, Tutorials, Blogs" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_12"> <span class="md-nav__icon md-icon"></span> Courses, Projects, Tutorials, Blogs </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../courses-projects/coursera/"> Coursera Courses </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../courses-projects/github_project/"> Github repo and projects </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" id="__nav_13" type="checkbox"/> <label class="md-nav__link" for="__nav_13"> Finance <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Finance" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_13"> <span class="md-nav__icon md-icon"></span> Finance </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../finance/use_of_ft/"> Fourier Transform in Price </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14" id="__nav_14" type="checkbox"/> <label class="md-nav__link" for="__nav_14"> Random <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Random" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_14"> <span class="md-nav__icon md-icon"></span> Random </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../random/links/"> ğŸ”— Random useful links </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../tags/"> Tags </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#setup-the-condition-or-screener-for-the-alert"> Setup the condition or screener for the alert </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#add-webhook"> Add webhook </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#list-inbound-ip-addresses"> List inbound IP addresses </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#screener-ref"> Screener Ref </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <h1 id="trading-set-for-api-automation">Trading set for API automation<a class="headerlink" href="#trading-set-for-api-automation" title="Permanent link">Â¶</a></h1> <h2 id="setup-the-condition-or-screener-for-the-alert">Setup the condition or screener for the alert<a class="headerlink" href="#setup-the-condition-or-screener-for-the-alert" title="Permanent link">Â¶</a></h2> <p>Construct message <div class="highlight"><span class="filename">JSON</span><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="p">{</span>
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="w">    </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"superTrendScreener"</span><span class="p">,</span>
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">    </span><span class="nt">"secret"</span><span class="p">:</span><span class="s2">"d4a8a427-5d19-45a1-9365-ecc19324fb91"</span><span class="p">,</span>
<a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">    </span><span class="nt">"message"</span><span class="p">:[</span>
<a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="w">       </span><span class="p">{</span>
<a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">          </span><span class="nt">"trendType"</span><span class="p">:</span><span class="s2">"upTrend"</span><span class="p">,</span>
<a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">          </span><span class="nt">"ticker"</span><span class="p">:</span><span class="s2">"{{exchange}}:{{ticker}}"</span><span class="p">,</span>
<a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">          </span><span class="nt">"open"</span><span class="p">:</span><span class="s2">"{{open}}"</span><span class="p">,</span>
<a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">          </span><span class="nt">"close"</span><span class="p">:</span><span class="s2">"{{close}}"</span><span class="p">,</span>
<a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">          </span><span class="nt">"percentage"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span>
<a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">          </span><span class="nt">"timenow"</span><span class="p">:</span><span class="s2">"{{timenow}}"</span>
<a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">       </span><span class="p">}</span><span class="w"> </span>
<a href="#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">    </span><span class="p">],</span>
<a href="#__codelineno-0-14" id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">    </span><span class="nt">"time"</span><span class="p">:</span><span class="s2">"{{time}}"</span><span class="p">,</span>
<a href="#__codelineno-0-15" id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="w">    </span><span class="nt">"timenow"</span><span class="p">:</span><span class="s2">"{{timenow}}"</span><span class="p">,</span>
<a href="#__codelineno-0-16" id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">    </span><span class="nt">"interval"</span><span class="p">:</span><span class="s2">"{{interval}}"</span>
<a href="#__codelineno-0-17" id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="w"> </span><span class="p">}</span>
</code></pre></div></p> <h2 id="add-webhook">Add webhook<a class="headerlink" href="#add-webhook" title="Permanent link">Â¶</a></h2> <p><a href="https://ailgo-web.ailgo.org/TelegramViewHttpTrigger">https://ailgo-web.ailgo.org/TelegramViewHttpTrigger</a></p> <h2 id="list-inbound-ip-addresses">List inbound IP addresses<a class="headerlink" href="#list-inbound-ip-addresses" title="Permanent link">Â¶</a></h2> <p><div class="highlight"><span class="filename">JavaScript</span><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="mf">52.89.214.238</span>
<a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="mf">34.212.75.30</span>
<a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="mf">54.218.53.128</span>
<a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="mf">52.32.178.7</span>
</code></pre></div> Ref: <a href="https://www.tradingview.com/support/solutions/43000529348-about-webhooks/">https://www.tradingview.com/support/solutions/43000529348-about-webhooks/</a></p> <h2 id="screener-ref">Screener Ref<a class="headerlink" href="#screener-ref" title="Permanent link">Â¶</a></h2> <p><a href="https://github.com/lth-elm/TradingView-Webhook-Trading-Bot/blob/main/pinestrategies/Quick-Mean-Reversion-Strat.pine">https://github.com/lth-elm/TradingView-Webhook-Trading-Bot/blob/main/pinestrategies/Quick-Mean-Reversion-Strat.pine</a> <div class="highlight"><span class="filename">JavaScript</span><pre><span></span><code><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="c1">// This source code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/</span>
<a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="c1">// Â© lth_elm</span>
<a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a>
<a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="c1">//@version=4</span>
<a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="nx">strategy</span><span class="p">(</span><span class="s2">"Mean reversion strategy"</span><span class="p">,</span><span class="w"> </span><span class="nx">overlay</span><span class="o">=</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nx">margin_long</span><span class="o">=</span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="nx">margin_short</span><span class="o">=</span><span class="mf">100</span><span class="p">)</span>
<a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a>
<a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a>
<a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="c1">// ----- INPUTS -----</span>
<a href="#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a>
<a href="#__codelineno-2-10" id="__codelineno-2-10" name="__codelineno-2-10"></a>
<a href="#__codelineno-2-11" id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="c1">// EMA</span>
<a href="#__codelineno-2-12" id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="nx">ema_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">(</span><span class="mf">200</span><span class="p">,</span><span class="w"> </span><span class="nx">minval</span><span class="o">=</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"EMA Length"</span><span class="p">)</span>
<a href="#__codelineno-2-13" id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="nx">ema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ema</span><span class="p">(</span><span class="nx">close</span><span class="p">,</span><span class="w"> </span><span class="nx">ema_len</span><span class="p">)</span>
<a href="#__codelineno-2-14" id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="nx">plot</span><span class="p">(</span><span class="nx">ema</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"EMA"</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="nx">color</span><span class="p">.</span><span class="nx">blue</span><span class="p">)</span>
<a href="#__codelineno-2-15" id="__codelineno-2-15" name="__codelineno-2-15"></a>
<a href="#__codelineno-2-16" id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="c1">// RSI</span>
<a href="#__codelineno-2-17" id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="nx">rsi_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">(</span><span class="mf">14</span><span class="p">,</span><span class="w"> </span><span class="nx">minval</span><span class="o">=</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"RSI Length"</span><span class="p">)</span>
<a href="#__codelineno-2-18" id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="nx">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">rsi</span><span class="p">(</span><span class="nx">close</span><span class="p">,</span><span class="w"> </span><span class="nx">rsi_len</span><span class="p">)</span>
<a href="#__codelineno-2-19" id="__codelineno-2-19" name="__codelineno-2-19"></a>
<a href="#__codelineno-2-20" id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="c1">// ATR</span>
<a href="#__codelineno-2-21" id="__codelineno-2-21" name="__codelineno-2-21"></a><span class="nx">tp_sl_mul</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span><span class="w">  </span><span class="s2">"â”€â”€â”€â”€â€ƒTP/SL multiplicator"</span><span class="p">)</span>
<a href="#__codelineno-2-22" id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="nx">risk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">(</span><span class="nx">title</span><span class="o">=</span><span class="s2">"Risk (%)"</span><span class="p">,</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="nx">input</span><span class="p">.</span><span class="kr">float</span><span class="p">,</span><span class="w"> </span><span class="nx">minval</span><span class="o">=</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">defval</span><span class="o">=</span><span class="mf">1</span><span class="p">)</span>
<a href="#__codelineno-2-23" id="__codelineno-2-23" name="__codelineno-2-23"></a><span class="nx">risk</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">risk</span><span class="o">/</span><span class="mf">100</span>
<a href="#__codelineno-2-24" id="__codelineno-2-24" name="__codelineno-2-24"></a><span class="nx">atr_bars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">(</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"ATR Bars"</span><span class="p">,</span><span class="w"> </span><span class="nx">defval</span><span class="o">=</span><span class="mf">14</span><span class="p">,</span><span class="w"> </span><span class="nx">minval</span><span class="o">=</span><span class="mf">1</span><span class="p">)</span>
<a href="#__codelineno-2-25" id="__codelineno-2-25" name="__codelineno-2-25"></a><span class="nx">stop_mult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">(</span><span class="nx">title</span><span class="o">=</span><span class="s2">"â€ƒâ–ª Stoploss Multiplicator"</span><span class="p">,</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="nx">input</span><span class="p">.</span><span class="kr">float</span><span class="p">,</span><span class="w"> </span><span class="nx">defval</span><span class="o">=</span><span class="mf">3</span><span class="p">)</span>
<a href="#__codelineno-2-26" id="__codelineno-2-26" name="__codelineno-2-26"></a><span class="nx">tp_mult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">(</span><span class="nx">title</span><span class="o">=</span><span class="s2">"â€ƒâ–ª Takeprofit Multiplicator"</span><span class="p">,</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="nx">input</span><span class="p">.</span><span class="kr">float</span><span class="p">,</span><span class="w"> </span><span class="nx">defval</span><span class="o">=</span><span class="mf">5</span><span class="p">)</span>
<a href="#__codelineno-2-27" id="__codelineno-2-27" name="__codelineno-2-27"></a><span class="nx">tp1_mult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">(</span><span class="nx">title</span><span class="o">=</span><span class="s2">"â€ƒâ–ª TP1 Multiplicator"</span><span class="p">,</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="nx">input</span><span class="p">.</span><span class="kr">float</span><span class="p">,</span><span class="w"> </span><span class="nx">defval</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<a href="#__codelineno-2-28" id="__codelineno-2-28" name="__codelineno-2-28"></a><span class="nx">tp2_mult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">(</span><span class="nx">title</span><span class="o">=</span><span class="s2">"â€ƒâ–ª TP2 Multiplicator"</span><span class="p">,</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="nx">input</span><span class="p">.</span><span class="kr">float</span><span class="p">,</span><span class="w"> </span><span class="nx">defval</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
<a href="#__codelineno-2-29" id="__codelineno-2-29" name="__codelineno-2-29"></a><span class="nx">tp_close</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">(</span><span class="nx">title</span><span class="o">=</span><span class="s2">"â–º TPx close (%)"</span><span class="p">,</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="nx">input</span><span class="p">.</span><span class="kr">float</span><span class="p">,</span><span class="w"> </span><span class="nx">defval</span><span class="o">=</span><span class="mf">15</span><span class="p">)</span>
<a href="#__codelineno-2-30" id="__codelineno-2-30" name="__codelineno-2-30"></a>
<a href="#__codelineno-2-31" id="__codelineno-2-31" name="__codelineno-2-31"></a><span class="nx">atr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">atr</span><span class="p">(</span><span class="nx">atr_bars</span><span class="p">)</span>
<a href="#__codelineno-2-32" id="__codelineno-2-32" name="__codelineno-2-32"></a>
<a href="#__codelineno-2-33" id="__codelineno-2-33" name="__codelineno-2-33"></a><span class="nx">plot</span><span class="p">(</span><span class="nx">tp_close</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"TP Close"</span><span class="p">,</span><span class="w"> </span><span class="nx">display</span><span class="o">=</span><span class="nx">display</span><span class="p">.</span><span class="nx">none</span><span class="p">)</span>
<a href="#__codelineno-2-34" id="__codelineno-2-34" name="__codelineno-2-34"></a><span class="nx">plot</span><span class="p">(</span><span class="nx">tp1_mult</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"TP1 Mult"</span><span class="p">,</span><span class="w"> </span><span class="nx">display</span><span class="o">=</span><span class="nx">display</span><span class="p">.</span><span class="nx">none</span><span class="p">)</span>
<a href="#__codelineno-2-35" id="__codelineno-2-35" name="__codelineno-2-35"></a><span class="nx">plot</span><span class="p">(</span><span class="nx">tp2_mult</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"TP2 Mult"</span><span class="p">,</span><span class="w"> </span><span class="nx">display</span><span class="o">=</span><span class="nx">display</span><span class="p">.</span><span class="nx">none</span><span class="p">)</span>
<a href="#__codelineno-2-36" id="__codelineno-2-36" name="__codelineno-2-36"></a>
<a href="#__codelineno-2-37" id="__codelineno-2-37" name="__codelineno-2-37"></a>
<a href="#__codelineno-2-38" id="__codelineno-2-38" name="__codelineno-2-38"></a><span class="c1">// ----- CONDITIONS -----</span>
<a href="#__codelineno-2-39" id="__codelineno-2-39" name="__codelineno-2-39"></a>
<a href="#__codelineno-2-40" id="__codelineno-2-40" name="__codelineno-2-40"></a>
<a href="#__codelineno-2-41" id="__codelineno-2-41" name="__codelineno-2-41"></a><span class="nx">bullishEng</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">open</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nx">close</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">close</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">open</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">open</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">close</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span>
<a href="#__codelineno-2-42" id="__codelineno-2-42" name="__codelineno-2-42"></a><span class="nx">bearishEng</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">open</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nx">close</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">close</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">open</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">open</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">close</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span>
<a href="#__codelineno-2-43" id="__codelineno-2-43" name="__codelineno-2-43"></a>
<a href="#__codelineno-2-44" id="__codelineno-2-44" name="__codelineno-2-44"></a><span class="nx">goLong</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">bullishEng</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">close</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">ema</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">r</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">30</span>
<a href="#__codelineno-2-45" id="__codelineno-2-45" name="__codelineno-2-45"></a><span class="nx">goShort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">bearishEng</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">close</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">ema</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">r</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">70</span>
<a href="#__codelineno-2-46" id="__codelineno-2-46" name="__codelineno-2-46"></a>
<a href="#__codelineno-2-47" id="__codelineno-2-47" name="__codelineno-2-47"></a>
<a href="#__codelineno-2-48" id="__codelineno-2-48" name="__codelineno-2-48"></a><span class="c1">// ------ GET IN/OUT A TRADE ------</span>
<a href="#__codelineno-2-49" id="__codelineno-2-49" name="__codelineno-2-49"></a>
<a href="#__codelineno-2-50" id="__codelineno-2-50" name="__codelineno-2-50"></a><span class="nx">inLongPosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">position_size</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span>
<a href="#__codelineno-2-51" id="__codelineno-2-51" name="__codelineno-2-51"></a><span class="nx">inShortPosition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">position_size</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0</span>
<a href="#__codelineno-2-52" id="__codelineno-2-52" name="__codelineno-2-52"></a><span class="nx">notInTrade</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">position_size</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0</span>
<a href="#__codelineno-2-53" id="__codelineno-2-53" name="__codelineno-2-53"></a>
<a href="#__codelineno-2-54" id="__codelineno-2-54" name="__codelineno-2-54"></a>
<a href="#__codelineno-2-55" id="__codelineno-2-55" name="__codelineno-2-55"></a><span class="c1">// ----- MANAGE TP/SL -----</span>
<a href="#__codelineno-2-56" id="__codelineno-2-56" name="__codelineno-2-56"></a>
<a href="#__codelineno-2-57" id="__codelineno-2-57" name="__codelineno-2-57"></a>
<a href="#__codelineno-2-58" id="__codelineno-2-58" name="__codelineno-2-58"></a><span class="c1">// For long</span>
<a href="#__codelineno-2-59" id="__codelineno-2-59" name="__codelineno-2-59"></a><span class="kr">float</span><span class="w"> </span><span class="nx">long_stop_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">na</span>
<a href="#__codelineno-2-60" id="__codelineno-2-60" name="__codelineno-2-60"></a><span class="kr">float</span><span class="w"> </span><span class="nx">long_profit_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">na</span>
<a href="#__codelineno-2-61" id="__codelineno-2-61" name="__codelineno-2-61"></a><span class="nx">long_stop_level</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">(</span><span class="nx">goLong</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">notInTrade</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">close</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">atr</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">stop_mult</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">long_stop_level</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span>
<a href="#__codelineno-2-62" id="__codelineno-2-62" name="__codelineno-2-62"></a><span class="nx">long_profit_level</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">(</span><span class="nx">goLong</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">notInTrade</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">close</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">atr</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">tp_mult</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">long_profit_level</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span>
<a href="#__codelineno-2-63" id="__codelineno-2-63" name="__codelineno-2-63"></a>
<a href="#__codelineno-2-64" id="__codelineno-2-64" name="__codelineno-2-64"></a><span class="c1">// For short</span>
<a href="#__codelineno-2-65" id="__codelineno-2-65" name="__codelineno-2-65"></a><span class="kr">float</span><span class="w"> </span><span class="nx">short_stop_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">na</span>
<a href="#__codelineno-2-66" id="__codelineno-2-66" name="__codelineno-2-66"></a><span class="kr">float</span><span class="w"> </span><span class="nx">short_profit_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">na</span>
<a href="#__codelineno-2-67" id="__codelineno-2-67" name="__codelineno-2-67"></a><span class="nx">short_stop_level</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">(</span><span class="nx">goShort</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">notInTrade</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">close</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">atr</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">stop_mult</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">short_stop_level</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span>
<a href="#__codelineno-2-68" id="__codelineno-2-68" name="__codelineno-2-68"></a><span class="nx">short_profit_level</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">(</span><span class="nx">goShort</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">notInTrade</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">close</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">atr</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">tp_mult</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">short_profit_level</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span>
<a href="#__codelineno-2-69" id="__codelineno-2-69" name="__codelineno-2-69"></a>
<a href="#__codelineno-2-70" id="__codelineno-2-70" name="__codelineno-2-70"></a><span class="c1">// Execute buy or sell order</span>
<a href="#__codelineno-2-71" id="__codelineno-2-71" name="__codelineno-2-71"></a><span class="k">if</span><span class="w"> </span><span class="nx">goLong</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">notInTrade</span>
<a href="#__codelineno-2-72" id="__codelineno-2-72" name="__codelineno-2-72"></a><span class="w">    </span><span class="nx">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">strategy</span><span class="p">.</span><span class="nx">equity</span><span class="o">*</span><span class="nx">risk</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">abs</span><span class="p">(</span><span class="nx">close</span><span class="o">-</span><span class="nx">long_stop_level</span><span class="p">)</span>
<a href="#__codelineno-2-73" id="__codelineno-2-73" name="__codelineno-2-73"></a><span class="w">    </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">entry</span><span class="p">(</span><span class="s2">"long"</span><span class="p">,</span><span class="w"> </span><span class="nx">strategy</span><span class="p">.</span><span class="kr">long</span><span class="p">,</span><span class="w"> </span><span class="nx">qty</span><span class="o">=</span><span class="nx">size</span><span class="p">,</span><span class="w"> </span><span class="nx">alert_message</span><span class="o">=</span><span class="s2">"entry"</span><span class="p">)</span>
<a href="#__codelineno-2-74" id="__codelineno-2-74" name="__codelineno-2-74"></a><span class="w">    </span><span class="c1">// strategy.exit("exit", "long", stop=long_stop_level, limit=long_profit_level, alert_message="exit")</span>
<a href="#__codelineno-2-75" id="__codelineno-2-75" name="__codelineno-2-75"></a><span class="w">    </span><span class="nx">inLongPosition</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kc">true</span>
<a href="#__codelineno-2-76" id="__codelineno-2-76" name="__codelineno-2-76"></a><span class="w">    </span><span class="nx">notInTrade</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kc">false</span>
<a href="#__codelineno-2-77" id="__codelineno-2-77" name="__codelineno-2-77"></a><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">goShort</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">notInTrade</span>
<a href="#__codelineno-2-78" id="__codelineno-2-78" name="__codelineno-2-78"></a><span class="w">    </span><span class="nx">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">strategy</span><span class="p">.</span><span class="nx">equity</span><span class="o">*</span><span class="nx">risk</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">abs</span><span class="p">(</span><span class="nx">close</span><span class="o">-</span><span class="nx">short_stop_level</span><span class="p">)</span>
<a href="#__codelineno-2-79" id="__codelineno-2-79" name="__codelineno-2-79"></a><span class="w">    </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">entry</span><span class="p">(</span><span class="s2">"short"</span><span class="p">,</span><span class="w"> </span><span class="nx">strategy</span><span class="p">.</span><span class="kr">short</span><span class="p">,</span><span class="w"> </span><span class="nx">qty</span><span class="o">=</span><span class="nx">size</span><span class="p">,</span><span class="w"> </span><span class="nx">when</span><span class="o">=</span><span class="nx">notInTrade</span><span class="p">,</span><span class="w"> </span><span class="nx">alert_message</span><span class="o">=</span><span class="s2">"entry"</span><span class="p">)</span>
<a href="#__codelineno-2-80" id="__codelineno-2-80" name="__codelineno-2-80"></a><span class="w">    </span><span class="c1">// strategy.exit("exit", "short", stop=short_stop_level, limit=short_profit_level, alert_message="exit")</span>
<a href="#__codelineno-2-81" id="__codelineno-2-81" name="__codelineno-2-81"></a><span class="w">    </span><span class="nx">inShortPosition</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kc">true</span>
<a href="#__codelineno-2-82" id="__codelineno-2-82" name="__codelineno-2-82"></a><span class="w">    </span><span class="nx">notInTrade</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kc">false</span>
<a href="#__codelineno-2-83" id="__codelineno-2-83" name="__codelineno-2-83"></a>
<a href="#__codelineno-2-84" id="__codelineno-2-84" name="__codelineno-2-84"></a>
<a href="#__codelineno-2-85" id="__codelineno-2-85" name="__codelineno-2-85"></a><span class="c1">// ----- MULTIPLE TP -----</span>
<a href="#__codelineno-2-86" id="__codelineno-2-86" name="__codelineno-2-86"></a>
<a href="#__codelineno-2-87" id="__codelineno-2-87" name="__codelineno-2-87"></a><span class="c1">// Set multiple takeprofit and the stoploss</span>
<a href="#__codelineno-2-88" id="__codelineno-2-88" name="__codelineno-2-88"></a><span class="nx">ticksConversion</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
<a href="#__codelineno-2-89" id="__codelineno-2-89" name="__codelineno-2-89"></a><span class="w">    </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">position_size</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">syminfo</span><span class="p">.</span><span class="nx">mintick</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kr">float</span><span class="p">(</span><span class="nx">na</span><span class="p">)</span>
<a href="#__codelineno-2-90" id="__codelineno-2-90" name="__codelineno-2-90"></a>
<a href="#__codelineno-2-91" id="__codelineno-2-91" name="__codelineno-2-91"></a><span class="nx">long_sl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">abs</span><span class="p">(</span><span class="nx">strategy</span><span class="p">.</span><span class="nx">position_avg_price</span><span class="o">-</span><span class="nx">long_stop_level</span><span class="p">)</span>
<a href="#__codelineno-2-92" id="__codelineno-2-92" name="__codelineno-2-92"></a><span class="nx">long_tp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">abs</span><span class="p">(</span><span class="nx">strategy</span><span class="p">.</span><span class="nx">position_avg_price</span><span class="o">-</span><span class="nx">long_profit_level</span><span class="p">)</span>
<a href="#__codelineno-2-93" id="__codelineno-2-93" name="__codelineno-2-93"></a><span class="nx">long_tp1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">tp1_mult</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">long_sl</span>
<a href="#__codelineno-2-94" id="__codelineno-2-94" name="__codelineno-2-94"></a><span class="nx">long_tp2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">tp2_mult</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">long_sl</span>
<a href="#__codelineno-2-95" id="__codelineno-2-95" name="__codelineno-2-95"></a><span class="k">if</span><span class="w"> </span><span class="nx">not</span><span class="w"> </span><span class="nx">notInTrade</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">goLong</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span>
<a href="#__codelineno-2-96" id="__codelineno-2-96" name="__codelineno-2-96"></a><span class="w">    </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="s2">"tp1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"long"</span><span class="p">,</span><span class="w"> </span><span class="nx">qty_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">tp_close</span><span class="p">,</span><span class="w"> </span><span class="nx">profit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ticksConversion</span><span class="p">(</span><span class="nx">long_tp1</span><span class="p">),</span><span class="w"> </span><span class="nx">loss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ticksConversion</span><span class="p">(</span><span class="nx">long_sl</span><span class="p">),</span><span class="w"> </span><span class="nx">alert_message</span><span class="o">=</span><span class="s2">"tp1_breakeven"</span><span class="p">)</span>
<a href="#__codelineno-2-97" id="__codelineno-2-97" name="__codelineno-2-97"></a><span class="w">    </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="s2">"tp2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"long"</span><span class="p">,</span><span class="w"> </span><span class="nx">qty_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">tp_close</span><span class="p">,</span><span class="w"> </span><span class="nx">profit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ticksConversion</span><span class="p">(</span><span class="nx">long_tp2</span><span class="p">),</span><span class="w"> </span><span class="nx">loss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ticksConversion</span><span class="p">(</span><span class="nx">long_sl</span><span class="p">),</span><span class="w"> </span><span class="nx">alert_message</span><span class="o">=</span><span class="s2">"tp2"</span><span class="p">)</span>
<a href="#__codelineno-2-98" id="__codelineno-2-98" name="__codelineno-2-98"></a><span class="w">    </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="s2">"exit"</span><span class="p">,</span><span class="w"> </span><span class="s2">"long"</span><span class="p">,</span><span class="w"> </span><span class="nx">qty_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="nx">profit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ticksConversion</span><span class="p">(</span><span class="nx">long_tp</span><span class="p">),</span><span class="w"> </span><span class="nx">loss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ticksConversion</span><span class="p">(</span><span class="nx">long_sl</span><span class="p">),</span><span class="w"> </span><span class="nx">alert_message</span><span class="o">=</span><span class="s2">"exit"</span><span class="p">)</span>
<a href="#__codelineno-2-99" id="__codelineno-2-99" name="__codelineno-2-99"></a>
<a href="#__codelineno-2-100" id="__codelineno-2-100" name="__codelineno-2-100"></a><span class="nx">short_sl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">abs</span><span class="p">(</span><span class="nx">strategy</span><span class="p">.</span><span class="nx">position_avg_price</span><span class="o">-</span><span class="nx">short_stop_level</span><span class="p">)</span>
<a href="#__codelineno-2-101" id="__codelineno-2-101" name="__codelineno-2-101"></a><span class="nx">short_tp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">abs</span><span class="p">(</span><span class="nx">strategy</span><span class="p">.</span><span class="nx">position_avg_price</span><span class="o">-</span><span class="nx">short_profit_level</span><span class="p">)</span>
<a href="#__codelineno-2-102" id="__codelineno-2-102" name="__codelineno-2-102"></a><span class="nx">short_tp1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">tp1_mult</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">short_sl</span>
<a href="#__codelineno-2-103" id="__codelineno-2-103" name="__codelineno-2-103"></a><span class="nx">short_tp2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">tp2_mult</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">short_sl</span>
<a href="#__codelineno-2-104" id="__codelineno-2-104" name="__codelineno-2-104"></a><span class="k">if</span><span class="w"> </span><span class="nx">not</span><span class="w"> </span><span class="nx">notInTrade</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">goShort</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span>
<a href="#__codelineno-2-105" id="__codelineno-2-105" name="__codelineno-2-105"></a><span class="w">    </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="s2">"tp1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"short"</span><span class="p">,</span><span class="w"> </span><span class="nx">qty_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">tp_close</span><span class="p">,</span><span class="w"> </span><span class="nx">profit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ticksConversion</span><span class="p">(</span><span class="nx">short_tp1</span><span class="p">),</span><span class="w"> </span><span class="nx">loss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ticksConversion</span><span class="p">(</span><span class="nx">short_sl</span><span class="p">),</span><span class="w"> </span><span class="nx">alert_message</span><span class="o">=</span><span class="s2">"tp1_breakeven"</span><span class="p">)</span>
<a href="#__codelineno-2-106" id="__codelineno-2-106" name="__codelineno-2-106"></a><span class="w">    </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="s2">"tp2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"short"</span><span class="p">,</span><span class="w"> </span><span class="nx">qty_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">tp_close</span><span class="p">,</span><span class="w"> </span><span class="nx">profit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ticksConversion</span><span class="p">(</span><span class="nx">short_tp2</span><span class="p">),</span><span class="w"> </span><span class="nx">loss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ticksConversion</span><span class="p">(</span><span class="nx">short_sl</span><span class="p">),</span><span class="w"> </span><span class="nx">alert_message</span><span class="o">=</span><span class="s2">"tp2"</span><span class="p">)</span>
<a href="#__codelineno-2-107" id="__codelineno-2-107" name="__codelineno-2-107"></a><span class="w">    </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="s2">"exit"</span><span class="p">,</span><span class="w"> </span><span class="s2">"short"</span><span class="p">,</span><span class="w"> </span><span class="nx">qty_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="nx">profit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ticksConversion</span><span class="p">(</span><span class="nx">short_tp</span><span class="p">),</span><span class="w"> </span><span class="nx">loss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ticksConversion</span><span class="p">(</span><span class="nx">short_sl</span><span class="p">),</span><span class="w"> </span><span class="nx">alert_message</span><span class="o">=</span><span class="s2">"exit"</span><span class="p">)</span>
<a href="#__codelineno-2-108" id="__codelineno-2-108" name="__codelineno-2-108"></a>
<a href="#__codelineno-2-109" id="__codelineno-2-109" name="__codelineno-2-109"></a><span class="c1">// Exit or breakeven</span>
<a href="#__codelineno-2-110" id="__codelineno-2-110" name="__codelineno-2-110"></a><span class="nx">longbreakstop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">position_avg_price</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="nx">strategy</span><span class="p">.</span><span class="nx">position_avg_price</span><span class="o">*</span><span class="mf">0.001</span><span class="p">)</span>
<a href="#__codelineno-2-111" id="__codelineno-2-111" name="__codelineno-2-111"></a><span class="nx">shortbreakstop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">position_avg_price</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="nx">strategy</span><span class="p">.</span><span class="nx">position_avg_price</span><span class="o">*</span><span class="mf">0.001</span><span class="p">)</span>
<a href="#__codelineno-2-112" id="__codelineno-2-112" name="__codelineno-2-112"></a>
<a href="#__codelineno-2-113" id="__codelineno-2-113" name="__codelineno-2-113"></a><span class="k">if</span><span class="w"> </span><span class="nx">inLongPosition</span>
<a href="#__codelineno-2-114" id="__codelineno-2-114" name="__codelineno-2-114"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">close</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">ema</span><span class="w"> </span><span class="c1">// or we can keep our atr multiplicator first objective</span>
<a href="#__codelineno-2-115" id="__codelineno-2-115" name="__codelineno-2-115"></a><span class="w">        </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">close</span><span class="p">(</span><span class="s2">"long"</span><span class="p">,</span><span class="w"> </span><span class="nx">alert_message</span><span class="o">=</span><span class="s2">"exit"</span><span class="p">)</span>
<a href="#__codelineno-2-116" id="__codelineno-2-116" name="__codelineno-2-116"></a><span class="w">    </span><span class="nx">breakeven_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">position_avg_price</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">long_tp1</span><span class="w"> </span><span class="c1">// change if breakeven tpx</span>
<a href="#__codelineno-2-117" id="__codelineno-2-117" name="__codelineno-2-117"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">high</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">breakeven_level</span>
<a href="#__codelineno-2-118" id="__codelineno-2-118" name="__codelineno-2-118"></a><span class="w">        </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="s2">"exit"</span><span class="p">,</span><span class="w"> </span><span class="s2">"long"</span><span class="p">,</span><span class="w"> </span><span class="nx">qty_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="nx">stop</span><span class="o">=</span><span class="nx">longbreakstop</span><span class="p">,</span><span class="w"> </span><span class="nx">limit</span><span class="o">=</span><span class="nx">long_profit_level</span><span class="p">,</span><span class="w"> </span><span class="nx">alert_message</span><span class="o">=</span><span class="s2">"exit"</span><span class="p">)</span>
<a href="#__codelineno-2-119" id="__codelineno-2-119" name="__codelineno-2-119"></a><span class="w">        </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="s2">"tp2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"long"</span><span class="p">,</span><span class="w"> </span><span class="nx">qty_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">tp_close</span><span class="p">,</span><span class="w"> </span><span class="nx">stop</span><span class="o">=</span><span class="nx">longbreakstop</span><span class="p">,</span><span class="w"> </span><span class="nx">profit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ticksConversion</span><span class="p">(</span><span class="nx">long_tp2</span><span class="p">),</span><span class="w"> </span><span class="nx">alert_message</span><span class="o">=</span><span class="s2">"tp2"</span><span class="p">)</span>
<a href="#__codelineno-2-120" id="__codelineno-2-120" name="__codelineno-2-120"></a><span class="k">if</span><span class="w"> </span><span class="nx">inShortPosition</span>
<a href="#__codelineno-2-121" id="__codelineno-2-121" name="__codelineno-2-121"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">close</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">ema</span><span class="w"> </span><span class="c1">// or we can keep our atr multiplicator first objective</span>
<a href="#__codelineno-2-122" id="__codelineno-2-122" name="__codelineno-2-122"></a><span class="w">        </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">close</span><span class="p">(</span><span class="s2">"short"</span><span class="p">,</span><span class="w"> </span><span class="nx">alert_message</span><span class="o">=</span><span class="s2">"exit"</span><span class="p">)</span>
<a href="#__codelineno-2-123" id="__codelineno-2-123" name="__codelineno-2-123"></a><span class="w">    </span><span class="nx">breakeven_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">position_avg_price</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">short_tp1</span><span class="w"> </span><span class="c1">// change if breakeven tpx</span>
<a href="#__codelineno-2-124" id="__codelineno-2-124" name="__codelineno-2-124"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">low</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">breakeven_level</span>
<a href="#__codelineno-2-125" id="__codelineno-2-125" name="__codelineno-2-125"></a><span class="w">        </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="s2">"exit"</span><span class="p">,</span><span class="w"> </span><span class="s2">"short"</span><span class="p">,</span><span class="w"> </span><span class="nx">qty_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="nx">stop</span><span class="o">=</span><span class="nx">shortbreakstop</span><span class="p">,</span><span class="w"> </span><span class="nx">limit</span><span class="o">=</span><span class="nx">short_profit_level</span><span class="p">,</span><span class="w"> </span><span class="nx">alert_message</span><span class="o">=</span><span class="s2">"exit"</span><span class="p">)</span>
<a href="#__codelineno-2-126" id="__codelineno-2-126" name="__codelineno-2-126"></a><span class="w">        </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="s2">"tp2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"short"</span><span class="p">,</span><span class="w"> </span><span class="nx">qty_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">tp_close</span><span class="p">,</span><span class="w"> </span><span class="nx">stop</span><span class="o">=</span><span class="nx">shortbreakstop</span><span class="p">,</span><span class="w"> </span><span class="nx">profit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ticksConversion</span><span class="p">(</span><span class="nx">short_tp2</span><span class="p">),</span><span class="w"> </span><span class="nx">alert_message</span><span class="o">=</span><span class="s2">"tp2"</span><span class="p">)</span>
<a href="#__codelineno-2-127" id="__codelineno-2-127" name="__codelineno-2-127"></a>
<a href="#__codelineno-2-128" id="__codelineno-2-128" name="__codelineno-2-128"></a>
<a href="#__codelineno-2-129" id="__codelineno-2-129" name="__codelineno-2-129"></a><span class="c1">// ----- Plot TP/SL -----</span>
<a href="#__codelineno-2-130" id="__codelineno-2-130" name="__codelineno-2-130"></a>
<a href="#__codelineno-2-131" id="__codelineno-2-131" name="__codelineno-2-131"></a><span class="nx">plot</span><span class="p">(</span><span class="nx">longbreakstop</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="nx">color</span><span class="p">.</span><span class="nx">yellow</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Long Breakeven"</span><span class="p">,</span><span class="w"> </span><span class="nx">display</span><span class="o">=</span><span class="nx">display</span><span class="p">.</span><span class="nx">none</span><span class="p">)</span>
<a href="#__codelineno-2-132" id="__codelineno-2-132" name="__codelineno-2-132"></a><span class="nx">plot</span><span class="p">(</span><span class="nx">shortbreakstop</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="nx">color</span><span class="p">.</span><span class="nx">yellow</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Short Breakeven"</span><span class="p">,</span><span class="w"> </span><span class="nx">display</span><span class="o">=</span><span class="nx">display</span><span class="p">.</span><span class="nx">none</span><span class="p">)</span>
<a href="#__codelineno-2-133" id="__codelineno-2-133" name="__codelineno-2-133"></a>
<a href="#__codelineno-2-134" id="__codelineno-2-134" name="__codelineno-2-134"></a><span class="nx">invisible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">color</span><span class="p">.</span><span class="ow">new</span><span class="p">(</span><span class="nx">color</span><span class="p">.</span><span class="nx">white</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">)</span>
<a href="#__codelineno-2-135" id="__codelineno-2-135" name="__codelineno-2-135"></a><span class="nx">p_price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">plot</span><span class="p">(</span><span class="nx">strategy</span><span class="p">.</span><span class="nx">position_avg_price</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="nx">invisible</span><span class="p">)</span>
<a href="#__codelineno-2-136" id="__codelineno-2-136" name="__codelineno-2-136"></a><span class="nx">p_long_stop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">plot</span><span class="p">(</span><span class="nx">long_stop_level</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="nx">invisible</span><span class="p">,</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="nx">plot</span><span class="p">.</span><span class="nx">style_linebr</span><span class="p">,</span><span class="w"> </span><span class="nx">linewidth</span><span class="o">=</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Long SL"</span><span class="p">)</span>
<a href="#__codelineno-2-137" id="__codelineno-2-137" name="__codelineno-2-137"></a><span class="nx">p_long_profit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">plot</span><span class="p">(</span><span class="nx">long_profit_level</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="nx">invisible</span><span class="p">,</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="nx">plot</span><span class="p">.</span><span class="nx">style_linebr</span><span class="p">,</span><span class="w"> </span><span class="nx">linewidth</span><span class="o">=</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Long TP"</span><span class="p">)</span>
<a href="#__codelineno-2-138" id="__codelineno-2-138" name="__codelineno-2-138"></a><span class="nx">p_short_stop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">plot</span><span class="p">(</span><span class="nx">short_stop_level</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="nx">invisible</span><span class="p">,</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="nx">plot</span><span class="p">.</span><span class="nx">style_linebr</span><span class="p">,</span><span class="w"> </span><span class="nx">linewidth</span><span class="o">=</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Short SL"</span><span class="p">)</span>
<a href="#__codelineno-2-139" id="__codelineno-2-139" name="__codelineno-2-139"></a><span class="nx">p_short_profit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">plot</span><span class="p">(</span><span class="nx">short_profit_level</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="nx">invisible</span><span class="p">,</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="nx">plot</span><span class="p">.</span><span class="nx">style_linebr</span><span class="p">,</span><span class="w"> </span><span class="nx">linewidth</span><span class="o">=</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Short TP"</span><span class="p">)</span>
<a href="#__codelineno-2-140" id="__codelineno-2-140" name="__codelineno-2-140"></a>
<a href="#__codelineno-2-141" id="__codelineno-2-141" name="__codelineno-2-141"></a><span class="nx">fill</span><span class="p">(</span><span class="nx">p_long_stop</span><span class="p">,</span><span class="w"> </span><span class="nx">p_price</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inLongPosition</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">color</span><span class="p">.</span><span class="nx">red</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">na</span><span class="p">)</span>
<a href="#__codelineno-2-142" id="__codelineno-2-142" name="__codelineno-2-142"></a><span class="nx">fill</span><span class="p">(</span><span class="nx">p_long_profit</span><span class="p">,</span><span class="w"> </span><span class="nx">p_price</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inLongPosition</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">color</span><span class="p">.</span><span class="nx">green</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">na</span><span class="p">)</span>
<a href="#__codelineno-2-143" id="__codelineno-2-143" name="__codelineno-2-143"></a><span class="nx">fill</span><span class="p">(</span><span class="nx">p_short_stop</span><span class="p">,</span><span class="w"> </span><span class="nx">p_price</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inShortPosition</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">color</span><span class="p">.</span><span class="nx">red</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">na</span><span class="p">)</span>
<a href="#__codelineno-2-144" id="__codelineno-2-144" name="__codelineno-2-144"></a><span class="nx">fill</span><span class="p">(</span><span class="nx">p_short_profit</span><span class="p">,</span><span class="w"> </span><span class="nx">p_price</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">inShortPosition</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">color</span><span class="p">.</span><span class="nx">green</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">na</span><span class="p">)</span>
</code></pre></div></p> <div class="highlight"><span class="filename">JavaScript</span><pre><span></span><code><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="c1">//@version=4</span>
<a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="nx">strategy</span><span class="p">(</span><span class="nx">title</span><span class="o">=</span><span class="s2">"Ichimoku &amp; Williams Fractals Screener"</span><span class="p">,</span><span class="w"> </span><span class="nx">overlay</span><span class="o">=</span><span class="kc">false</span><span class="p">)</span>
<a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>
<a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="nx">i_timeZone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">(</span><span class="s2">"GMT-8"</span><span class="p">)</span>
<a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a>
<a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="nx">screenerFunc</span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span>
<a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="w">    </span><span class="c1">// Ichimoku Cloud</span>
<a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="w">    </span><span class="nx">conversionLinePeriods</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">9</span>
<a href="#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="w">    </span><span class="nx">baseLinePeriods</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">26</span>
<a href="#__codelineno-3-10" id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="w">    </span><span class="nx">lagSpan2Periods</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">52</span>
<a href="#__codelineno-3-11" id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="w">    </span><span class="nx">conversionLine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">highest</span><span class="p">(</span><span class="nx">high</span><span class="p">,</span><span class="w"> </span><span class="nx">conversionLinePeriods</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">lowest</span><span class="p">(</span><span class="nx">low</span><span class="p">,</span><span class="w"> </span><span class="nx">conversionLinePeriods</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span>
<a href="#__codelineno-3-12" id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="w">    </span><span class="nx">baseLine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">highest</span><span class="p">(</span><span class="nx">high</span><span class="p">,</span><span class="w"> </span><span class="nx">baseLinePeriods</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">lowest</span><span class="p">(</span><span class="nx">low</span><span class="p">,</span><span class="w"> </span><span class="nx">baseLinePeriods</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span>
<a href="#__codelineno-3-13" id="__codelineno-3-13" name="__codelineno-3-13"></a><span class="w">    </span><span class="nx">leadLine1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">conversionLine</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">baseLine</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span>
<a href="#__codelineno-3-14" id="__codelineno-3-14" name="__codelineno-3-14"></a>
<a href="#__codelineno-3-15" id="__codelineno-3-15" name="__codelineno-3-15"></a><span class="w">    </span><span class="c1">// Williams Fractals</span>
<a href="#__codelineno-3-16" id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="w">    </span><span class="nx">fractalLookBack</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span>
<a href="#__codelineno-3-17" id="__codelineno-3-17" name="__codelineno-3-17"></a><span class="w">    </span><span class="nx">isHighFractal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">high</span><span class="p">[</span><span class="nx">fractalLookBack</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">high</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">high</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">high</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">high</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">high</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span>
<a href="#__codelineno-3-18" id="__codelineno-3-18" name="__codelineno-3-18"></a><span class="w">    </span><span class="nx">isLowFractal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">low</span><span class="p">[</span><span class="nx">fractalLookBack</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">low</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">low</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">low</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">low</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">low</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span>
<a href="#__codelineno-3-19" id="__codelineno-3-19" name="__codelineno-3-19"></a>
<a href="#__codelineno-3-20" id="__codelineno-3-20" name="__codelineno-3-20"></a><span class="w">    </span><span class="c1">// Trading Logic</span>
<a href="#__codelineno-3-21" id="__codelineno-3-21" name="__codelineno-3-21"></a><span class="w">    </span><span class="nx">longCondition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">crossover</span><span class="p">(</span><span class="nx">close</span><span class="p">,</span><span class="w"> </span><span class="nx">leadLine1</span><span class="p">)</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">isLowFractal</span><span class="p">[</span><span class="nx">fractalLookBack</span><span class="p">]</span>
<a href="#__codelineno-3-22" id="__codelineno-3-22" name="__codelineno-3-22"></a><span class="w">    </span><span class="nx">shortCondition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">crossunder</span><span class="p">(</span><span class="nx">close</span><span class="p">,</span><span class="w"> </span><span class="nx">leadLine1</span><span class="p">)</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">isHighFractal</span><span class="p">[</span><span class="nx">fractalLookBack</span><span class="p">]</span>
<a href="#__codelineno-3-23" id="__codelineno-3-23" name="__codelineno-3-23"></a>
<a href="#__codelineno-3-24" id="__codelineno-3-24" name="__codelineno-3-24"></a><span class="w">    </span><span class="p">[</span><span class="nx">longCondition</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition</span><span class="p">,</span><span class="w"> </span><span class="nx">open</span><span class="p">,</span><span class="w"> </span><span class="nx">close</span><span class="p">]</span>
<a href="#__codelineno-3-25" id="__codelineno-3-25" name="__codelineno-3-25"></a>
<a href="#__codelineno-3-26" id="__codelineno-3-26" name="__codelineno-3-26"></a><span class="nx">getPacificCurrentTime</span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span>
<a href="#__codelineno-3-27" id="__codelineno-3-27" name="__codelineno-3-27"></a><span class="w">    </span><span class="nx">pacificTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">tostring</span><span class="p">(</span><span class="nx">hour</span><span class="p">(</span><span class="nx">timenow</span><span class="p">,</span><span class="w"> </span><span class="nx">i_timeZone</span><span class="p">),</span><span class="w"> </span><span class="s2">"00."</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">tostring</span><span class="p">(</span><span class="nx">minute</span><span class="p">(</span><span class="nx">timenow</span><span class="p">,</span><span class="w"> </span><span class="nx">i_timeZone</span><span class="p">),</span><span class="w"> </span><span class="s2">"00."</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">tostring</span><span class="p">(</span><span class="nx">second</span><span class="p">(</span><span class="nx">timenow</span><span class="p">,</span><span class="w"> </span><span class="nx">i_timeZone</span><span class="p">),</span><span class="w"> </span><span class="s2">"00"</span><span class="p">)</span>
<a href="#__codelineno-3-28" id="__codelineno-3-28" name="__codelineno-3-28"></a>
<a href="#__codelineno-3-29" id="__codelineno-3-29" name="__codelineno-3-29"></a><span class="nx">roundn</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span>
<a href="#__codelineno-3-30" id="__codelineno-3-30" name="__codelineno-3-30"></a><span class="w">    </span><span class="nx">mult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span>
<a href="#__codelineno-3-31" id="__codelineno-3-31" name="__codelineno-3-31"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mf">0</span>
<a href="#__codelineno-3-32" id="__codelineno-3-32" name="__codelineno-3-32"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">abs</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span>
<a href="#__codelineno-3-33" id="__codelineno-3-33" name="__codelineno-3-33"></a><span class="w">            </span><span class="nx">mult</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">mult</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">10</span>
<a href="#__codelineno-3-34" id="__codelineno-3-34" name="__codelineno-3-34"></a><span class="w">    </span><span class="nx">n</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">round</span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">mult</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">mult</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">round</span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">mult</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">mult</span><span class="w"> </span>
<a href="#__codelineno-3-35" id="__codelineno-3-35" name="__codelineno-3-35"></a>
<a href="#__codelineno-3-36" id="__codelineno-3-36" name="__codelineno-3-36"></a><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">ticker01</span><span class="p">,</span><span class="w"> </span><span class="nx">longCondition01</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition01</span><span class="p">,</span><span class="w"> </span><span class="nx">open01</span><span class="p">,</span><span class="w"> </span><span class="nx">close01</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span>
<a href="#__codelineno-3-37" id="__codelineno-3-37" name="__codelineno-3-37"></a><span class="w">    </span><span class="nx">lbl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'\n ticker:'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">ticker01</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">' open:'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">tostring</span><span class="p">(</span><span class="nx">roundn</span><span class="p">(</span><span class="nx">open01</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">' close:'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">tostring</span><span class="p">(</span><span class="nx">roundn</span><span class="p">(</span><span class="nx">close01</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">' timenow:'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">getPacificCurrentTime</span><span class="p">()</span>
<a href="#__codelineno-3-38" id="__codelineno-3-38" name="__codelineno-3-38"></a><span class="w">    </span><span class="nx">lbl</span>
<a href="#__codelineno-3-39" id="__codelineno-3-39" name="__codelineno-3-39"></a>
<a href="#__codelineno-3-40" id="__codelineno-3-40" name="__codelineno-3-40"></a><span class="nx">s01</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">(</span><span class="nx">title</span><span class="o">=</span><span class="s2">"COINBASE:BTCUSD"</span><span class="p">,</span><span class="w">  </span><span class="nx">type</span><span class="o">=</span><span class="nx">input</span><span class="p">.</span><span class="nx">symbol</span><span class="p">,</span><span class="w"> </span><span class="nx">defval</span><span class="o">=</span><span class="s2">"COINBASE:BTCUSD"</span><span class="p">)</span>
<a href="#__codelineno-3-41" id="__codelineno-3-41" name="__codelineno-3-41"></a><span class="nx">s02</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">(</span><span class="nx">title</span><span class="o">=</span><span class="s2">"COINBASE:ETHUSD"</span><span class="p">,</span><span class="w">  </span><span class="nx">type</span><span class="o">=</span><span class="nx">input</span><span class="p">.</span><span class="nx">symbol</span><span class="p">,</span><span class="w"> </span><span class="nx">defval</span><span class="o">=</span><span class="s2">"COINBASE:ETHUSD"</span><span class="p">)</span>
<a href="#__codelineno-3-42" id="__codelineno-3-42" name="__codelineno-3-42"></a><span class="nx">s03</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">(</span><span class="nx">title</span><span class="o">=</span><span class="s2">"COINBASE:LTCUSD"</span><span class="p">,</span><span class="w">  </span><span class="nx">type</span><span class="o">=</span><span class="nx">input</span><span class="p">.</span><span class="nx">symbol</span><span class="p">,</span><span class="w"> </span><span class="nx">defval</span><span class="o">=</span><span class="s2">"COINBASE:LTCUSD"</span><span class="p">)</span>
<a href="#__codelineno-3-43" id="__codelineno-3-43" name="__codelineno-3-43"></a>
<a href="#__codelineno-3-44" id="__codelineno-3-44" name="__codelineno-3-44"></a><span class="p">[</span><span class="nx">longCondition01</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition01</span><span class="p">,</span><span class="w"> </span><span class="nx">open01</span><span class="p">,</span><span class="w"> </span><span class="nx">close01</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">security</span><span class="p">(</span><span class="nx">s01</span><span class="p">,</span><span class="w"> </span><span class="nx">timeframe</span><span class="p">.</span><span class="nx">period</span><span class="p">,</span><span class="w"> </span><span class="nx">screenerFunc</span><span class="p">())</span>
<a href="#__codelineno-3-45" id="__codelineno-3-45" name="__codelineno-3-45"></a><span class="p">[</span><span class="nx">longCondition02</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition02</span><span class="p">,</span><span class="w"> </span><span class="nx">open02</span><span class="p">,</span><span class="w"> </span><span class="nx">close02</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">security</span><span class="p">(</span><span class="nx">s02</span><span class="p">,</span><span class="w"> </span><span class="nx">timeframe</span><span class="p">.</span><span class="nx">period</span><span class="p">,</span><span class="w"> </span><span class="nx">screenerFunc</span><span class="p">())</span>
<a href="#__codelineno-3-46" id="__codelineno-3-46" name="__codelineno-3-46"></a><span class="p">[</span><span class="nx">longCondition03</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition03</span><span class="p">,</span><span class="w"> </span><span class="nx">open03</span><span class="p">,</span><span class="w"> </span><span class="nx">close03</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">security</span><span class="p">(</span><span class="nx">s03</span><span class="p">,</span><span class="w"> </span><span class="nx">timeframe</span><span class="p">.</span><span class="nx">period</span><span class="p">,</span><span class="w"> </span><span class="nx">screenerFunc</span><span class="p">())</span>
<a href="#__codelineno-3-47" id="__codelineno-3-47" name="__codelineno-3-47"></a>
<a href="#__codelineno-3-48" id="__codelineno-3-48" name="__codelineno-3-48"></a><span class="nx">scr_label_long</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'"trendType:Long'</span>
<a href="#__codelineno-3-49" id="__codelineno-3-49" name="__codelineno-3-49"></a><span class="nx">scr_label_long</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">longCondition01</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">scr_label_long</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">s01</span><span class="p">,</span><span class="w"> </span><span class="nx">longCondition01</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition01</span><span class="p">,</span><span class="w"> </span><span class="nx">open01</span><span class="p">,</span><span class="w"> </span><span class="nx">close01</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">scr_label_long</span>
<a href="#__codelineno-3-50" id="__codelineno-3-50" name="__codelineno-3-50"></a><span class="nx">scr_label_long</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">longCondition02</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">scr_label_long</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">s02</span><span class="p">,</span><span class="w"> </span><span class="nx">longCondition02</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition02</span><span class="p">,</span><span class="w"> </span><span class="nx">open02</span><span class="p">,</span><span class="w"> </span><span class="nx">close02</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">scr_label_long</span>
<a href="#__codelineno-3-51" id="__codelineno-3-51" name="__codelineno-3-51"></a><span class="nx">scr_label_long</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">longCondition03</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">scr_label_long</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">s03</span><span class="p">,</span><span class="w"> </span><span class="nx">longCondition03</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition03</span><span class="p">,</span><span class="w"> </span><span class="nx">open03</span><span class="p">,</span><span class="w"> </span><span class="nx">close03</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">scr_label_long</span>
<a href="#__codelineno-3-52" id="__codelineno-3-52" name="__codelineno-3-52"></a><span class="nx">scr_label_long</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">scr_label_long</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'"'</span>
<a href="#__codelineno-3-53" id="__codelineno-3-53" name="__codelineno-3-53"></a>
<a href="#__codelineno-3-54" id="__codelineno-3-54" name="__codelineno-3-54"></a><span class="nx">scr_label_short</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'"trendType:Short'</span>
<a href="#__codelineno-3-55" id="__codelineno-3-55" name="__codelineno-3-55"></a><span class="nx">scr_label_short</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">shortCondition01</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">scr_label_short</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">s01</span><span class="p">,</span><span class="w"> </span><span class="nx">longCondition01</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition01</span><span class="p">,</span><span class="w"> </span><span class="nx">open01</span><span class="p">,</span><span class="w"> </span><span class="nx">close01</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">scr_label_short</span>
<a href="#__codelineno-3-56" id="__codelineno-3-56" name="__codelineno-3-56"></a><span class="nx">scr_label_short</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">shortCondition02</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">scr_label_short</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">s02</span><span class="p">,</span><span class="w"> </span><span class="nx">longCondition02</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition02</span><span class="p">,</span><span class="w"> </span><span class="nx">open02</span><span class="p">,</span><span class="w"> </span><span class="nx">close02</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">scr_label_short</span>
<a href="#__codelineno-3-57" id="__codelineno-3-57" name="__codelineno-3-57"></a><span class="nx">scr_label_short</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">shortCondition03</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">scr_label_short</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">s03</span><span class="p">,</span><span class="w"> </span><span class="nx">longCondition03</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition03</span><span class="p">,</span><span class="w"> </span><span class="nx">open03</span><span class="p">,</span><span class="w"> </span><span class="nx">close03</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">scr_label_short</span>
<a href="#__codelineno-3-58" id="__codelineno-3-58" name="__codelineno-3-58"></a><span class="nx">scr_label_short</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">scr_label_short</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'"'</span>
<a href="#__codelineno-3-59" id="__codelineno-3-59" name="__codelineno-3-59"></a>
<a href="#__codelineno-3-60" id="__codelineno-3-60" name="__codelineno-3-60"></a><span class="nx">lab_l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">label</span><span class="p">.</span><span class="ow">new</span><span class="p">(</span>
<a href="#__codelineno-3-61" id="__codelineno-3-61" name="__codelineno-3-61"></a><span class="w">          </span><span class="nx">bar_index</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">scr_label_long</span><span class="p">,</span><span class="w"> </span>
<a href="#__codelineno-3-62" id="__codelineno-3-62" name="__codelineno-3-62"></a><span class="w">          </span><span class="nx">color</span><span class="o">=</span><span class="nx">color</span><span class="p">.</span><span class="nx">gray</span><span class="p">,</span><span class="w"> </span>
<a href="#__codelineno-3-63" id="__codelineno-3-63" name="__codelineno-3-63"></a><span class="w">          </span><span class="nx">textcolor</span><span class="o">=</span><span class="nx">color</span><span class="p">.</span><span class="nx">black</span><span class="p">,</span><span class="w"> </span>
<a href="#__codelineno-3-64" id="__codelineno-3-64" name="__codelineno-3-64"></a><span class="w">          </span><span class="nx">style</span><span class="o">=</span><span class="nx">label</span><span class="p">.</span><span class="nx">style_labeldown</span><span class="p">,</span>
<a href="#__codelineno-3-65" id="__codelineno-3-65" name="__codelineno-3-65"></a><span class="w">          </span><span class="nx">yloc</span><span class="o">=</span><span class="nx">yloc</span><span class="p">.</span><span class="nx">price</span><span class="p">)</span>
<a href="#__codelineno-3-66" id="__codelineno-3-66" name="__codelineno-3-66"></a>
<a href="#__codelineno-3-67" id="__codelineno-3-67" name="__codelineno-3-67"></a><span class="nx">label</span><span class="p">.</span><span class="ow">delete</span><span class="p">(</span><span class="nx">lab_l</span><span class="p">[</span><span class="mf">1</span><span class="p">])</span>
<a href="#__codelineno-3-68" id="__codelineno-3-68" name="__codelineno-3-68"></a>
<a href="#__codelineno-3-69" id="__codelineno-3-69" name="__codelineno-3-69"></a><span class="nx">plot</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="nx">color</span><span class="p">.</span><span class="ow">new</span><span class="p">(</span><span class="nx">color</span><span class="p">.</span><span class="nx">gray</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">))</span>
<a href="#__codelineno-3-70" id="__codelineno-3-70" name="__codelineno-3-70"></a>
<a href="#__codelineno-3-71" id="__codelineno-3-71" name="__codelineno-3-71"></a><span class="k">if</span><span class="p">(</span><span class="nx">longCondition01</span><span class="w"> </span><span class="nx">or</span><span class="w"> </span><span class="nx">longCondition02</span><span class="w"> </span><span class="nx">or</span><span class="w"> </span><span class="nx">longCondition03</span><span class="p">)</span>
<a href="#__codelineno-3-72" id="__codelineno-3-72" name="__codelineno-3-72"></a><span class="w">    </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">entry</span><span class="p">(</span><span class="s2">"long"</span><span class="p">,</span><span class="w"> </span><span class="kr">long</span><span class="o">=</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nx">alert_message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">scr_label_long</span><span class="p">)</span>
<a href="#__codelineno-3-73" id="__codelineno-3-73" name="__codelineno-3-73"></a>
<a href="#__codelineno-3-74" id="__codelineno-3-74" name="__codelineno-3-74"></a><span class="k">if</span><span class="p">(</span><span class="nx">shortCondition01</span><span class="w"> </span><span class="nx">or</span><span class="w"> </span><span class="nx">shortCondition02</span><span class="w"> </span><span class="nx">or</span><span class="w"> </span><span class="nx">shortCondition03</span><span class="p">)</span>
<a href="#__codelineno-3-75" id="__codelineno-3-75" name="__codelineno-3-75"></a><span class="w">    </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">entry</span><span class="p">(</span><span class="s2">"short"</span><span class="p">,</span><span class="w"> </span><span class="kr">long</span><span class="o">=</span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="nx">alert_message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">scr_label_short</span><span class="p">)</span>
</code></pre></div> <div class="highlight"><span class="filename">JavaScript</span><pre><span></span><code><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="c1">//@version=5</span>
<a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="nx">strategy</span><span class="p">(</span><span class="nx">title</span><span class="o">=</span><span class="s1">'Ichimoku &amp; Williams Fractals Screener'</span><span class="p">,</span><span class="w"> </span><span class="nx">overlay</span><span class="o">=</span><span class="kc">false</span><span class="p">)</span>
<a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>
<a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="nx">i_timeZone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">(</span><span class="s1">'GMT-8'</span><span class="p">)</span>
<a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a>
<a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="nx">screenerFunc</span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span>
<a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">    </span><span class="c1">// Ichimoku Cloud</span>
<a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">    </span><span class="nx">conversionLinePeriods</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">9</span>
<a href="#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">    </span><span class="nx">baseLinePeriods</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">26</span>
<a href="#__codelineno-4-10" id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">    </span><span class="nx">lagSpan2Periods</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">52</span>
<a href="#__codelineno-4-11" id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">    </span><span class="nx">conversionLine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">ta</span><span class="p">.</span><span class="nx">highest</span><span class="p">(</span><span class="nx">high</span><span class="p">,</span><span class="w"> </span><span class="nx">conversionLinePeriods</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">ta</span><span class="p">.</span><span class="nx">lowest</span><span class="p">(</span><span class="nx">low</span><span class="p">,</span><span class="w"> </span><span class="nx">conversionLinePeriods</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span>
<a href="#__codelineno-4-12" id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="w">    </span><span class="nx">baseLine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">ta</span><span class="p">.</span><span class="nx">highest</span><span class="p">(</span><span class="nx">high</span><span class="p">,</span><span class="w"> </span><span class="nx">baseLinePeriods</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">ta</span><span class="p">.</span><span class="nx">lowest</span><span class="p">(</span><span class="nx">low</span><span class="p">,</span><span class="w"> </span><span class="nx">baseLinePeriods</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span>
<a href="#__codelineno-4-13" id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="w">    </span><span class="nx">leadLine1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">conversionLine</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">baseLine</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span>
<a href="#__codelineno-4-14" id="__codelineno-4-14" name="__codelineno-4-14"></a>
<a href="#__codelineno-4-15" id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="w">    </span><span class="c1">// Williams Fractals</span>
<a href="#__codelineno-4-16" id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="w">    </span><span class="nx">fractalLookBack</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span>
<a href="#__codelineno-4-17" id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="w">    </span><span class="nx">isHighFractal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">high</span><span class="p">[</span><span class="nx">fractalLookBack</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">high</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">high</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">high</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">high</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">high</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span>
<a href="#__codelineno-4-18" id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="w">    </span><span class="nx">isLowFractal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">low</span><span class="p">[</span><span class="nx">fractalLookBack</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">low</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">low</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">low</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">low</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">low</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span>
<a href="#__codelineno-4-19" id="__codelineno-4-19" name="__codelineno-4-19"></a>
<a href="#__codelineno-4-20" id="__codelineno-4-20" name="__codelineno-4-20"></a><span class="w">    </span><span class="c1">// Trading Logic</span>
<a href="#__codelineno-4-21" id="__codelineno-4-21" name="__codelineno-4-21"></a><span class="w">    </span><span class="nx">longCondition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ta</span><span class="p">.</span><span class="nx">crossover</span><span class="p">(</span><span class="nx">close</span><span class="p">,</span><span class="w"> </span><span class="nx">leadLine1</span><span class="p">)</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">isLowFractal</span><span class="p">[</span><span class="nx">fractalLookBack</span><span class="p">]</span>
<a href="#__codelineno-4-22" id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="w">    </span><span class="nx">shortCondition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ta</span><span class="p">.</span><span class="nx">crossunder</span><span class="p">(</span><span class="nx">close</span><span class="p">,</span><span class="w"> </span><span class="nx">leadLine1</span><span class="p">)</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">isHighFractal</span><span class="p">[</span><span class="nx">fractalLookBack</span><span class="p">]</span>
<a href="#__codelineno-4-23" id="__codelineno-4-23" name="__codelineno-4-23"></a>
<a href="#__codelineno-4-24" id="__codelineno-4-24" name="__codelineno-4-24"></a><span class="w">    </span><span class="p">[</span><span class="nx">longCondition</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition</span><span class="p">,</span><span class="w"> </span><span class="nx">open</span><span class="p">,</span><span class="w"> </span><span class="nx">close</span><span class="p">]</span>
<a href="#__codelineno-4-25" id="__codelineno-4-25" name="__codelineno-4-25"></a>
<a href="#__codelineno-4-26" id="__codelineno-4-26" name="__codelineno-4-26"></a><span class="nx">getPacificCurrentTime</span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span>
<a href="#__codelineno-4-27" id="__codelineno-4-27" name="__codelineno-4-27"></a><span class="w">    </span><span class="nx">pacificTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">str</span><span class="p">.</span><span class="nx">tostring</span><span class="p">(</span><span class="nx">hour</span><span class="p">(</span><span class="nx">timenow</span><span class="p">,</span><span class="w"> </span><span class="nx">i_timeZone</span><span class="p">),</span><span class="w"> </span><span class="s1">'00.'</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">str</span><span class="p">.</span><span class="nx">tostring</span><span class="p">(</span><span class="nx">minute</span><span class="p">(</span><span class="nx">timenow</span><span class="p">,</span><span class="w"> </span><span class="nx">i_timeZone</span><span class="p">),</span><span class="w"> </span><span class="s1">'00.'</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">str</span><span class="p">.</span><span class="nx">tostring</span><span class="p">(</span><span class="nx">second</span><span class="p">(</span><span class="nx">timenow</span><span class="p">,</span><span class="w"> </span><span class="nx">i_timeZone</span><span class="p">),</span><span class="w"> </span><span class="s1">'00'</span><span class="p">)</span>
<a href="#__codelineno-4-28" id="__codelineno-4-28" name="__codelineno-4-28"></a><span class="w">    </span><span class="nx">pacificTime</span>
<a href="#__codelineno-4-29" id="__codelineno-4-29" name="__codelineno-4-29"></a>
<a href="#__codelineno-4-30" id="__codelineno-4-30" name="__codelineno-4-30"></a><span class="nx">roundn</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
<a href="#__codelineno-4-31" id="__codelineno-4-31" name="__codelineno-4-31"></a><span class="w">    </span><span class="nx">mult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span>
<a href="#__codelineno-4-32" id="__codelineno-4-32" name="__codelineno-4-32"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mf">0</span>
<a href="#__codelineno-4-33" id="__codelineno-4-33" name="__codelineno-4-33"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span><span class="w"> </span><span class="nx">by</span><span class="w"> </span><span class="mf">1</span>
<a href="#__codelineno-4-34" id="__codelineno-4-34" name="__codelineno-4-34"></a><span class="w">            </span><span class="nx">mult</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="mf">10</span>
<a href="#__codelineno-4-35" id="__codelineno-4-35" name="__codelineno-4-35"></a><span class="w">            </span><span class="nx">mult</span>
<a href="#__codelineno-4-36" id="__codelineno-4-36" name="__codelineno-4-36"></a><span class="w">    </span><span class="nx">n</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">mult</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">mult</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">mult</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">mult</span>
<a href="#__codelineno-4-37" id="__codelineno-4-37" name="__codelineno-4-37"></a>
<a href="#__codelineno-4-38" id="__codelineno-4-38" name="__codelineno-4-38"></a><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">ticker01</span><span class="p">,</span><span class="w"> </span><span class="nx">longCondition01</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition01</span><span class="p">,</span><span class="w"> </span><span class="nx">open01</span><span class="p">,</span><span class="w"> </span><span class="nx">close01</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
<a href="#__codelineno-4-39" id="__codelineno-4-39" name="__codelineno-4-39"></a><span class="w">    </span><span class="nx">lbl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'\n ticker:'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">ticker01</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">' open:'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">str</span><span class="p">.</span><span class="nx">tostring</span><span class="p">(</span><span class="nx">roundn</span><span class="p">(</span><span class="nx">open01</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">' close:'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">str</span><span class="p">.</span><span class="nx">tostring</span><span class="p">(</span><span class="nx">roundn</span><span class="p">(</span><span class="nx">close01</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">' timenow:'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">getPacificCurrentTime</span><span class="p">()</span>
<a href="#__codelineno-4-40" id="__codelineno-4-40" name="__codelineno-4-40"></a><span class="w">    </span><span class="nx">lbl</span>
<a href="#__codelineno-4-41" id="__codelineno-4-41" name="__codelineno-4-41"></a>
<a href="#__codelineno-4-42" id="__codelineno-4-42" name="__codelineno-4-42"></a><span class="nx">s01</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">.</span><span class="nx">symbol</span><span class="p">(</span><span class="nx">title</span><span class="o">=</span><span class="s1">'COINBASE:BTCUSD'</span><span class="p">,</span><span class="w"> </span><span class="nx">defval</span><span class="o">=</span><span class="s1">'COINBASE:BTCUSD'</span><span class="p">)</span>
<a href="#__codelineno-4-43" id="__codelineno-4-43" name="__codelineno-4-43"></a><span class="nx">s02</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">.</span><span class="nx">symbol</span><span class="p">(</span><span class="nx">title</span><span class="o">=</span><span class="s1">'COINBASE:ETHUSD'</span><span class="p">,</span><span class="w"> </span><span class="nx">defval</span><span class="o">=</span><span class="s1">'COINBASE:ETHUSD'</span><span class="p">)</span>
<a href="#__codelineno-4-44" id="__codelineno-4-44" name="__codelineno-4-44"></a><span class="nx">s03</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">.</span><span class="nx">symbol</span><span class="p">(</span><span class="nx">title</span><span class="o">=</span><span class="s1">'COINBASE:LTCUSD'</span><span class="p">,</span><span class="w"> </span><span class="nx">defval</span><span class="o">=</span><span class="s1">'COINBASE:LTCUSD'</span><span class="p">)</span>
<a href="#__codelineno-4-45" id="__codelineno-4-45" name="__codelineno-4-45"></a>
<a href="#__codelineno-4-46" id="__codelineno-4-46" name="__codelineno-4-46"></a><span class="p">[</span><span class="nx">longCondition01</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition01</span><span class="p">,</span><span class="w"> </span><span class="nx">open01</span><span class="p">,</span><span class="w"> </span><span class="nx">close01</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">request</span><span class="p">.</span><span class="nx">security</span><span class="p">(</span><span class="nx">s01</span><span class="p">,</span><span class="w"> </span><span class="nx">timeframe</span><span class="p">.</span><span class="nx">period</span><span class="p">,</span><span class="w"> </span><span class="nx">screenerFunc</span><span class="p">())</span>
<a href="#__codelineno-4-47" id="__codelineno-4-47" name="__codelineno-4-47"></a><span class="p">[</span><span class="nx">longCondition02</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition02</span><span class="p">,</span><span class="w"> </span><span class="nx">open02</span><span class="p">,</span><span class="w"> </span><span class="nx">close02</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">request</span><span class="p">.</span><span class="nx">security</span><span class="p">(</span><span class="nx">s02</span><span class="p">,</span><span class="w"> </span><span class="nx">timeframe</span><span class="p">.</span><span class="nx">period</span><span class="p">,</span><span class="w"> </span><span class="nx">screenerFunc</span><span class="p">())</span>
<a href="#__codelineno-4-48" id="__codelineno-4-48" name="__codelineno-4-48"></a><span class="p">[</span><span class="nx">longCondition03</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition03</span><span class="p">,</span><span class="w"> </span><span class="nx">open03</span><span class="p">,</span><span class="w"> </span><span class="nx">close03</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">request</span><span class="p">.</span><span class="nx">security</span><span class="p">(</span><span class="nx">s03</span><span class="p">,</span><span class="w"> </span><span class="nx">timeframe</span><span class="p">.</span><span class="nx">period</span><span class="p">,</span><span class="w"> </span><span class="nx">screenerFunc</span><span class="p">())</span>
<a href="#__codelineno-4-49" id="__codelineno-4-49" name="__codelineno-4-49"></a>
<a href="#__codelineno-4-50" id="__codelineno-4-50" name="__codelineno-4-50"></a><span class="nx">scr_label_long</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'"trendType:Long'</span>
<a href="#__codelineno-4-51" id="__codelineno-4-51" name="__codelineno-4-51"></a><span class="nx">scr_label_long</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">longCondition01</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">scr_label_long</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">s01</span><span class="p">,</span><span class="w"> </span><span class="nx">longCondition01</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition01</span><span class="p">,</span><span class="w"> </span><span class="nx">open01</span><span class="p">,</span><span class="w"> </span><span class="nx">close01</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">scr_label_long</span>
<a href="#__codelineno-4-52" id="__codelineno-4-52" name="__codelineno-4-52"></a><span class="nx">scr_label_long</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">longCondition02</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">scr_label_long</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">s02</span><span class="p">,</span><span class="w"> </span><span class="nx">longCondition02</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition02</span><span class="p">,</span><span class="w"> </span><span class="nx">open02</span><span class="p">,</span><span class="w"> </span><span class="nx">close02</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">scr_label_long</span>
<a href="#__codelineno-4-53" id="__codelineno-4-53" name="__codelineno-4-53"></a><span class="nx">scr_label_long</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">longCondition03</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">scr_label_long</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">s03</span><span class="p">,</span><span class="w"> </span><span class="nx">longCondition03</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition03</span><span class="p">,</span><span class="w"> </span><span class="nx">open03</span><span class="p">,</span><span class="w"> </span><span class="nx">close03</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">scr_label_long</span>
<a href="#__codelineno-4-54" id="__codelineno-4-54" name="__codelineno-4-54"></a><span class="nx">scr_label_long</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s1">'"'</span>
<a href="#__codelineno-4-55" id="__codelineno-4-55" name="__codelineno-4-55"></a>
<a href="#__codelineno-4-56" id="__codelineno-4-56" name="__codelineno-4-56"></a><span class="nx">scr_label_short</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'"trendType:Short'</span>
<a href="#__codelineno-4-57" id="__codelineno-4-57" name="__codelineno-4-57"></a><span class="nx">scr_label_short</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">shortCondition01</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">scr_label_short</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">s01</span><span class="p">,</span><span class="w"> </span><span class="nx">longCondition01</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition01</span><span class="p">,</span><span class="w"> </span><span class="nx">open01</span><span class="p">,</span><span class="w"> </span><span class="nx">close01</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">scr_label_short</span>
<a href="#__codelineno-4-58" id="__codelineno-4-58" name="__codelineno-4-58"></a><span class="nx">scr_label_short</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">shortCondition02</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">scr_label_short</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">s02</span><span class="p">,</span><span class="w"> </span><span class="nx">longCondition02</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition02</span><span class="p">,</span><span class="w"> </span><span class="nx">open02</span><span class="p">,</span><span class="w"> </span><span class="nx">close02</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">scr_label_short</span>
<a href="#__codelineno-4-59" id="__codelineno-4-59" name="__codelineno-4-59"></a><span class="nx">scr_label_short</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">shortCondition03</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">scr_label_short</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">s03</span><span class="p">,</span><span class="w"> </span><span class="nx">longCondition03</span><span class="p">,</span><span class="w"> </span><span class="nx">shortCondition03</span><span class="p">,</span><span class="w"> </span><span class="nx">open03</span><span class="p">,</span><span class="w"> </span><span class="nx">close03</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">scr_label_short</span>
<a href="#__codelineno-4-60" id="__codelineno-4-60" name="__codelineno-4-60"></a><span class="nx">scr_label_short</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s1">'"'</span>
<a href="#__codelineno-4-61" id="__codelineno-4-61" name="__codelineno-4-61"></a>
<a href="#__codelineno-4-62" id="__codelineno-4-62" name="__codelineno-4-62"></a><span class="nx">lab_l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">label</span><span class="p">.</span><span class="ow">new</span><span class="p">(</span><span class="nx">bar_index</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">scr_label_long</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="nx">color</span><span class="p">.</span><span class="nx">gray</span><span class="p">,</span><span class="w"> </span><span class="nx">textcolor</span><span class="o">=</span><span class="nx">color</span><span class="p">.</span><span class="nx">black</span><span class="p">,</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="nx">label</span><span class="p">.</span><span class="nx">style_label_down</span><span class="p">,</span><span class="w"> </span><span class="nx">yloc</span><span class="o">=</span><span class="nx">yloc</span><span class="p">.</span><span class="nx">price</span><span class="p">)</span>
<a href="#__codelineno-4-63" id="__codelineno-4-63" name="__codelineno-4-63"></a>
<a href="#__codelineno-4-64" id="__codelineno-4-64" name="__codelineno-4-64"></a><span class="nx">label</span><span class="p">.</span><span class="ow">delete</span><span class="p">(</span><span class="nx">lab_l</span><span class="p">[</span><span class="mf">1</span><span class="p">])</span>
<a href="#__codelineno-4-65" id="__codelineno-4-65" name="__codelineno-4-65"></a>
<a href="#__codelineno-4-66" id="__codelineno-4-66" name="__codelineno-4-66"></a><span class="nx">plot</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="nx">color</span><span class="p">.</span><span class="ow">new</span><span class="p">(</span><span class="nx">color</span><span class="p">.</span><span class="nx">gray</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">))</span>
<a href="#__codelineno-4-67" id="__codelineno-4-67" name="__codelineno-4-67"></a>
<a href="#__codelineno-4-68" id="__codelineno-4-68" name="__codelineno-4-68"></a><span class="k">if</span><span class="w"> </span><span class="nx">longCondition01</span><span class="w"> </span><span class="nx">or</span><span class="w"> </span><span class="nx">longCondition02</span><span class="w"> </span><span class="nx">or</span><span class="w"> </span><span class="nx">longCondition03</span>
<a href="#__codelineno-4-69" id="__codelineno-4-69" name="__codelineno-4-69"></a><span class="w">    </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">entry</span><span class="p">(</span><span class="s1">'long'</span><span class="p">,</span><span class="w"> </span><span class="nx">direction</span><span class="o">=</span><span class="nx">strategy</span><span class="p">.</span><span class="kr">long</span><span class="p">,</span><span class="w"> </span><span class="nx">alert_message</span><span class="o">=</span><span class="nx">scr_label_long</span><span class="p">)</span>
<a href="#__codelineno-4-70" id="__codelineno-4-70" name="__codelineno-4-70"></a>
<a href="#__codelineno-4-71" id="__codelineno-4-71" name="__codelineno-4-71"></a><span class="k">if</span><span class="w"> </span><span class="nx">shortCondition01</span><span class="w"> </span><span class="nx">or</span><span class="w"> </span><span class="nx">shortCondition02</span><span class="w"> </span><span class="nx">or</span><span class="w"> </span><span class="nx">shortCondition03</span>
<a href="#__codelineno-4-72" id="__codelineno-4-72" name="__codelineno-4-72"></a><span class="w">    </span><span class="nx">strategy</span><span class="p">.</span><span class="nx">entry</span><span class="p">(</span><span class="s1">'short'</span><span class="p">,</span><span class="w"> </span><span class="nx">direction</span><span class="o">=</span><span class="nx">strategy</span><span class="p">.</span><span class="kr">short</span><span class="p">,</span><span class="w"> </span><span class="nx">alert_message</span><span class="o">=</span><span class="nx">scr_label_short</span><span class="p">)</span>
</code></pre></div> </article> </div> </div> </main> <footer class="md-footer"> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> Made with <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank"> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <script id="__config" type="application/json">{"base": "../..", "features": ["search.highlight", "search.suggest", "header.autohide"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src="../../assets/javascripts/bundle.8492ddcf.min.js"></script> <script src="../../assets/javascripts/extra.js"></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom"});})</script></body> </html>